/**
 * baserjs - v0.0.8-alpha r106
 * update: 2014-10-29
 * Author: baserCMS Users Community [https://github.com/baserproject/]
 * Github: https://github.com/baserproject/baserjs
 * License: Licensed under the MIT License
 */

(function(){"use strict";var a,b=this,c=b.document,d=b.location,e=jQuery;!function(a){!function(a){var b=function(){function a(){}return a.UID=function(a){var b=Math.floor(1e8*Math.random());a||(a=(new Date).valueOf());var c=b+a,d="uid-"+c.toString(24);return d},a}();a.String=b}(a.utility||(a.utility={}));a.utility}(a||(a={}));var a;!function(a){!function(a){var c=b,d=function(){function a(){}return a.getUA=function(){var a=navigator.userAgent,b={iOS:/ios/i.test(a),iPad:/ipad/i.test(a),iPhone:/iphone/i.test(a),iPod:/ipod/i.test(a),android:/android/i.test(a)};return b},a.spec={isTouchable:void 0!==c.ontouchstart,ua:a.getUA()},a}();a.Browser=d}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){var b=function(){function a(){this.timerId=null,this.interval=13,this._onProgress=null,this.now()}return a.prototype.valueOf=function(){return this.datetime.valueOf()},a.prototype.now=function(){return this.datetime=new Date,this.valueOf()},a.prototype.start=function(a){this.now();this.stop();return this},a.prototype.stop=function(){return clearTimeout(this.timerId),this.timerId=null,this},a.prototype.wait=function(a,b,c){var d=this;return null==c&&(c=this),this.stop(),this.timerId=setTimeout(function(){d.stop(),b.call(c)},a),this},a.prototype.progress=function(a){return e.isFunction(a)&&(this._onProgress=a),this},a.wait=function(b,c,d){return(new a).wait(b,c,d)},a}();a.Timer=b}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){var d=function(){function d(){this.timer=new a.Timer}return d.prototype.to=function(f,g){var h,i,j,k,l,m,n,o,p,q,r=this,s=0;if(this.options=g||{},s+=this.options.offset||0,this.options.wheelCancel&&e(c).on("mousewheel",function(){r.isScroll&&(r._finish(),e.isFunction(r.options.onScrollCancel)&&r.options.onScrollCancel.call(r,new e.Event("scrollcancel")))}),e.isNumeric(f))s+=parseFloat(f)||0,this.targetX=0,this.targetY=s;else{if(!f)return q=e(b.location.hash),q.length&&a.Timer.wait(d.delayWhenURLHashTarget,function(){b.scrollTo(0,0),r.to(q,s)}),this;if(q=e(f),!q.length)return this;for(h=q[0],i=0,j=0;h;)i+=h.offsetLeft,j+=h.offsetTop,h=h.offsetParent;m=c.documentElement.clientWidth,n=c.documentElement.clientHeight,k=c.documentElement.scrollWidth,l=c.documentElement.scrollHeight,o=Math.max(m,k),p=Math.max(n,l),this.targetX=Math.min(i,o)+s,this.targetY=Math.min(j,p)+s}return this.isScroll||(this.isScroll=!0,e.isFunction(this.options.onScrollStart)&&this.options.onScrollStart.call(this,new e.Event("scrollstart")),this._scroll()),this},d.prototype._scroll=function(){var a=this._getX(),c=this._getY(),f=(this.targetX-a)/d.speed,g=(this.targetY-c)/d.speed,h=Math.floor(a+f),i=Math.floor(c+g);Math.abs(f)<1&&Math.abs(g)<1||this.prevX===a&&this.prevY===c?(b.scrollTo(this.targetX,this.targetY),this._finish(),e.isFunction(this.options.onScrollEnd)&&this.options.onScrollEnd.call(this,new e.Event("scrollend"))):(b.scrollTo(h,i),this.prevX=a,this.prevY=c,e.isFunction(this.options.onScrollProgress)&&this.options.onScrollProgress.call(this,new e.Event("scrollprogress")),this.timer.wait(d.interval,this._scroll,this))},d.prototype._getX=function(){return void 0!==b.pageXOffset?b.pageXOffset:c.documentElement.scrollLeft||c.body.scrollLeft},d.prototype._getY=function(){return void 0!==b.pageYOffset?b.pageYOffset:c.documentElement.scrollTop||c.body.scrollTop},d.prototype._finish=function(){this.isScroll=!1,this.prevX=null,this.prevY=null,this.timer.stop()},d.speed=4,d.interval=20,d.delayWhenURLHashTarget=30,d}();a.Scroll=d}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(b){!function(b){var c=function(){function b(b){this.name="",this.$el=b,this.id=this.$el.attr("id"),this.id||(this.id=a.utility.String.UID(),this.$el.attr("id",this.id));var c=this.$el.attr("name");c&&(this.name=c)}return b}();b.Element=c}(b.element||(b.element={}));b.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){!function(a){var b=function(){function b(){}return b.radio=function(b,c){new a.Radio(b,c);return b},b.checkbox=function(b,c){new a.Checkbox(b,c);return b},b.select=function(b,c){new a.Select(b,c);return b},b.selectMultiple=function(a){return a},b.valid=function(a){return a},b.className="-bc-form-element",b.elements=[],b.radioGroups={},b}();a.Form=b}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a,f=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};!function(a){!function(a){!function(a){var b="-wrapper",c="-label",d="-focus",g="-blur",h=function(h){function i(d,f){var g=this;h.call(this,d),this.isFocus=!1,this.$el.addClass(a.Form.className);var j,k=e.extend(i.defaultOption,f);j=this.$el.closest("label"),this.isWrappedByLabel=!!j.length,j.length||(j=e('[for="'+this.id+'"]')),k.autoLabeling&&!j.length&&(this.label=this.$el.attr("title")||k.label||this.$el.attr("name"),j=e("<"+k.labelTag.toLowerCase()+" />"),j.insertAfter(this.$el),k.labelClass&&j.addClass(k.labelClass),this.label&&j.text(this.label),"label"===k.labelTag.toLowerCase()&&j.attr("for",this.id)),this.$label=j,j.addClass(a.Form.className),j.addClass(a.Form.className+c);var l="<span />",m=e(l);m.addClass(a.Form.className+b),this.isWrappedByLabel?this.$label.wrapAll(m):this.$el.add(this.$label).wrapAll(m),this.$wrapper=this.$el.closest("."+a.Form.className+b),this.$el.on("focus.bcFormElement",function(){g._onfocus()}),this.$el.on("blur.bcFormElement",function(){g._onblur()}),this._onblur(),a.Form.elements.push(this)}return f(i,h),i.prototype._onfocus=function(){this.isFocus=!0,this.$el.addClass(a.Form.className+d),this.$el.removeClass(a.Form.className+g),this.$label.addClass(a.Form.className+d),this.$label.removeClass(a.Form.className+g)},i.prototype._onblur=function(){this.isFocus=!1,this.$el.addClass(a.Form.className+g),this.$el.removeClass(a.Form.className+d),this.$label.addClass(a.Form.className+g),this.$label.removeClass(a.Form.className+d)},i.defaultOption={label:"",labelTag:"label",labelClass:"",autoLabeling:!0},i}(a.Element);a.FormElement=h}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){!function(b){var d="-select",g="-option",h="-pseudo",i="-focus",j="-blur",k=e(c),l=function(c){function l(f,i){var j=this;c.call(this,f,i),this.$el.addClass(b.Form.className+d),this.$wrapper.addClass(b.Form.className+d+"-wrapper");var k=this.$label.children().detach();this.$label.empty(),this.$label.append(k),this.$label.addClass(b.Form.className),this.$label.addClass(b.Form.className+d+"-label"),this.$pseudo=e("<a />"),this.$pseudo.attr("href","#"),this.$pseudo.appendTo(this.$label),this.$pseudo.addClass(b.Form.className),this.$pseudo.addClass(b.Form.className+d+h),this.$selected=e("<span />"),this.$selected.text(this.label),this.$selected.appendTo(this.$pseudo),this.$selected.addClass(b.Form.className),this.$selected.addClass(b.Form.className+d+h+"-selected"),this.$options=e("<ul />"),this.$options.appendTo(this.$pseudo),this.$options.addClass(b.Form.className),this.$options.addClass(b.Form.className+d+h+g+"-list"),this.$el.find("option").each(function(a,c){var f=e(c),i=f.val(),k=f.text(),l=e("<li />");l.appendTo(j.$options),l.data("value",i),l.text(k),l.addClass(b.Form.className),l.addClass(b.Form.className+d+h+g)}),this._update(),this.$el.on("change.bcSelect",function(){j._onchange()}),this.$options.on("click.bcSelect","li",function(a){var b=e(a.target),c=b.index();j.$el.find("option").eq(c).prop("selected",!0),a.stopPropagation(),a.preventDefault(),j._onchange()}),this.$pseudo.on("click.bcSelect",function(a){a.preventDefault()}),a.Browser.spec.isTouchable?a.Browser.spec.ua.iPhone?(this.$pseudo.on("click.bcSelect",function(){j.$label.focus()}),this.$el.addClass(b.Form.className+d+"-os-iphone"),this.$label.addClass(b.Form.className+d+"-os-iphone")):a.Browser.spec.ua.android&&(this.$el.addClass(b.Form.className+d+"-os-android"),this.$label.addClass(b.Form.className+d+"-os-android")):this._psuedoFocusEvent()}return f(l,c),l.prototype._psuedoFocusEvent=function(){var a=this;this.$el.off("focus.bcFormElement"),this.$el.off("blur.bcFormElement"),this.$el.on("focus.bcSelect",function(){a.$pseudo.focus()}),this.$pseudo.on("focus.bcSelect",function(b){b.stopPropagation(),k.trigger("click.bcSelect"),a._onfocus()}),this.$selected.on("click.bcSelect",function(b){k.trigger("click.bcSelect"),a._onfocus(),b.stopPropagation(),b.preventDefault()}),k.on("click.bcSelect",function(){a._onblur()})},l.prototype._onchange=function(){this._update(),this._onblur()},l.prototype._onfocus=function(){c.prototype._onfocus.call(this),this.$pseudo.addClass(b.Form.className+i),this.$pseudo.removeClass(b.Form.className+j)},l.prototype._onblur=function(){this.$pseudo&&(c.prototype._onblur.call(this),this.$pseudo.addClass(b.Form.className+j),this.$pseudo.removeClass(b.Form.className+i))},l.prototype._update=function(){var a=this,c=(this.$el.find(":selected"),this.$options.find("li"));this.$el.find("option").each(function(f,i){var j=e(i),k=j.prop("selected"),l=c.eq(f);k&&a.$selected.text(j.text()),l.attr("aria-selected",""+k),k?(l.addClass(b.Form.className+d+h+g+"-selected"),l.removeClass(b.Form.className+d+h+g+"-unselected")):(l.addClass(b.Form.className+d+h+g+"-unselected"),l.removeClass(b.Form.className+d+h+g+"-selected"))})},l}(b.FormElement);b.Select=l}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){!function(a){var b="-state-checked",c="-state-unchecked",d=function(d){function g(b,c){var f=this;d.call(this,b,c);var h=e.extend(a.FormElement.defaultOption,g.defaultOption,c);this._checkedClass=h.checkedClass,this.checked=this.$el.prop("checked"),this.defaultChecked=this.$el.prop("defaultChecked"),this._update(),this.$el.on("change.bcCheckableElement",function(){f._onchenge()})}return f(g,d),g.prototype.update=function(){this.$el.prop("checked")!==this.checked&&this._update()},g.prototype._onchenge=function(){this.checked=!this.checked,this._update()},g.prototype._update=function(){var d=this.$el.prop("checked"),e=a.Form.className+b,f=a.Form.className+c;this.$el.attr("aria-checked",""+d),d?(this.$el.removeClass(f),this.$el.addClass(e),this.$el.addClass(this._checkedClass),this.$label.removeClass(f),this.$label.addClass(e),this.$label.addClass(this._checkedClass)):(this.$el.addClass(f),this.$el.removeClass(e),this.$el.removeClass(this._checkedClass),this.$label.addClass(f),this.$label.removeClass(e),this.$label.removeClass(this._checkedClass)),this.checked=d},g.defaultOption={checkedClass:""},g}(a.FormElement);a.CheckableElement=d}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){!function(a){var b="-radio",c=function(c){function d(d,e){c.call(this,d,e),this.$el.addClass(a.Form.className+b),this.$wrapper.addClass(a.Form.className+b+"-wrapper"),this.$label.addClass(a.Form.className+b+"-label"),a.Form.radioGroups[this.name]||(a.Form.radioGroups[this.name]=new a.RadioGroup(this.name)),a.Form.radioGroups[this.name].add(this)}return f(d,c),d.prototype._onchenge=function(){c.prototype._onchenge.call(this),a.Form.radioGroups[this.name].update(this)},d}(a.CheckableElement);a.Radio=c}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){!function(a){var b="-checkbox",c=function(c){function d(d,e){c.call(this,d,e),this.$el.addClass(a.Form.className+b),this.$wrapper.addClass(a.Form.className+b+"-wrapper"),this.$label&&this.$label.addClass(a.Form.className+b+"-label")}return f(d,c),d}(a.CheckableElement);a.Checkbox=c}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){!function(a){var b=function(){function a(a){this.radioButtons=[],this.name=a}return a.prototype.add=function(a){for(var b=0,c=this.radioButtons.length;c>b;b++)if(this.radioButtons[b]===a)return;this.radioButtons.push(a)},a.prototype.update=function(a){for(var b=0,c=this.radioButtons.length;c>b;b++)this.radioButtons[b]!==a&&this.radioButtons[b].update()},a}();a.RadioGroup=b}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){!function(a){var b=function(a){function b(c){a.call(this,c),this.$el.addClass(b.className)}return f(b,a),b.alignHeight=function(a,c){var d=new b(a);return d.alignHeight(c),a},b.prototype.alignHeight=function(){return this},b.className="-bc-box-element",b.boxes=[],b}(a.Element);a.Box=b}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){!function(a){var c=function(a){function c(d,e){a.call(this,d),this.$el.addClass(c.className),"google"in b&&google.maps?this._init(e):console&&console.warn&&console.warn('ReferenceError: google.maps, Must load script "//maps.google.com/maps/api/js"'),c.maps.push(this),d.data(c.className,this)}return f(c,a),c.prototype._init=function(a){var b=this,f=this.$el.data("lat")||c.lat,g=this.$el.data("lng")||c.lng;this.$coordinates=this.$coordinates||this.$el.find("[data-lat][data-lng]").detach(),this.$coordinates.length<=0&&(this.$coordinates=this.$el);var h=[];this.$coordinates.each(function(a,b){var c=e(b),f=new d(c);h.push(f)}),this.mapOption=this.mapOption||e.extend({zoom:14,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.HYBRID,google.maps.MapTypeId.ROADMAP]},scrollwheel:!1,center:new google.maps.LatLng(f,g)},a),this.info=new google.maps.InfoWindow({disableAutoPan:!0}),this.gmap=new google.maps.Map(this.$el[0],this.mapOption),e.each(h,function(a,c){c.markTo(b)})},c.prototype.reload=function(){this._init()},c.lat=35.681382,c.lng=139.766084,c.className="-bc-map-element",c.maps=[],c}(a.Element);a.Map=c;var d=function(){function a(a){this.$el=a,this.lat=a.data("lat"),this.lng=a.data("lng"),this.title=a.attr("title")||a.data("title")||a.find("h1,h2,h3,h4,h5,h6").text()||null,this.icon=a.data("icon")||null}return a.prototype.markTo=function(a){var b=this;this.marker=new google.maps.Marker({position:new google.maps.LatLng(this.lat,this.lng),title:this.title,icon:this.icon,map:a.gmap}),a.$coordinates!==a.$el&&google.maps.event.addListener(this.marker,"click",function(){a.info.setContent(b.$el[0]),a.info.open(a.gmap,b.marker),b.marker.setZIndex(google.maps.Marker.MAX_ZINDEX+1)})},a}()}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){!function(a){var c=function(a){function c(b,d){a.call(this,b),this._init(d)&&(c.movies.push(this),this.$el.addClass(c.className),b.data(c.className,this))}return f(c,a),c.prototype._init=function(){var a=this.$el.data("id"),f=+(this.$el.data("width")||this.$el.attr("width")||0/0),g=+(this.$el.data("height")||this.$el.attr("height")||0/0),h="file:"===d.protocol?"http:":"";this.$el.empty();var i=e('<iframe frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>'),j=e.param({version:3,playlist:a,rel:0,autoplay:1,controls:0,disablekb:1,iv_load_policy:3,loop:1,modestbranding:1,showinfo:0,wmode:"transparent",enablejsapi:1}),k=h+c.PLAYER_URL+a+"?"+j;this.movieId=a,i.prop("src",k);var l=this.id+"-Player";i.prop("id",l),i.css({position:"relative",display:"block",width:"100%",height:"100%"}),i.appendTo(this.$el),f&&i.width(f),g&&i.height(g),e.getScript(h+c.API_URL);var m,n=setInterval(function(){!m&&"YT"in b&&YT.Player&&(m=new YT.Player(l,null)),m&&m.pauseVideo&&m.playVideo&&(clearInterval(n),e(b).on("blur",function(){m.pauseVideo()}).on("focus",function(){m.playVideo()}))},300);return!0},c.prototype.reload=function(){this._init()},c.className="-bc-youtube-element",c.PLAYER_URL="//www.youtube.com/embed/",c.API_URL="//www.youtube.com/player_api",c.movies=[],c}(a.Element);a.Youtube=c}(a.element||(a.element={}));a.element}(a.ui||(a.ui={}));a.ui}(a||(a={}));var a;!function(a){!function(a){var b=function(){function a(){}return a}();a.Validation=b}(a.ui||(a.ui={}));a.ui}(a||(a={})),this.baser=a,e.fn.bcRadio=function(b){return this.each(function(c,d){var f=e(d);a.ui.element.Form.radio(f,b)})},e.fn.bcCheckbox=function(b){return this.each(function(c,d){var f=e(d);a.ui.element.Form.checkbox(f,b)})},e.fn.bcSelect=function(b){return this.each(function(c,d){var f=e(d);a.ui.element.Form.select(f,b)})},e.fn.bcBoxAlignHeight=function(){return a.ui.element.Box.alignHeight(this),this},e.fn.bcMaps=function(){return this.each(function(b,c){var d=e(c),f=d.data(a.ui.element.Map.className);f?f.reload():new a.ui.element.Map(d)})},e.fn.bcYoutube=function(){return this.each(function(b,c){var d=e(c),f=d.data(a.ui.element.Youtube.className);f?f.reload():new a.ui.element.Youtube(d)})},e.fn.bcBackground=function(a){return this.each(function(c,d){var f=e.extend({align:"center",valign:"center",size:"contain",child:">*:first"},a),g=e(d),h=g.find(f.child),i=+(g.data("width")||h.data("width")||h.attr("width")||h.width())||400,j=+(g.data("height")||h.data("height")||h.attr("height")||h.height())||300,k=i/j,l=g.css("position");("static"===l||""===l||null==l)&&g.css("position","relative"),h.css({position:"absolute",top:0,left:0});var m=function(){var a,b=g.width(),c=g.height(),d=b/c;switch(f.size){case"contain":a=d>1?i>1&&d>k?b/i:c/j:j>1&&k>d?c/j:b/i;break;case"cover":a=d>1?i>1&&d>k?c/j:b/i:j>1&&k>d?b/i:c/j;break;default:return}var e,l=i*a,m=j*a;switch(f.align){case"top":e=0;break;case"bottom":e=c-m;break;case"center":default:e=c/2-m/2}var n;switch(f.valign){case"left":n=0;break;case"right":n=b-l;break;case"center":default:n=b/2-l/2}h.css({width:l,height:m,top:e,left:n})};m(),e(b).on("resize",function(){m()})})},e.fn.bcScrollTo=function(b){return this.on("click",function(c){var f,g,h,i,j=e(this),k=j.attr("href"),l=new a.ui.Scroll;if(k){if(b&&e.isPlainObject(b.keywords))for(f in b.keywords)if(b.keywords.hasOwnProperty(f)&&(g=b.keywords[f],f===k))return l.to(g,this.options),c.preventDefault(),void console.log(k);if(h=j.prop("href"),i=d.protocol+"//"+d.host+d.pathname+d.search,k=h.replace(i,""),"#top"===k)return l.to(0,b),void c.preventDefault();try{if(g=e(k),g.length)return l.to(g,this.options),void c.preventDefault()}catch(m){}}})},e.bcScroll=new a.ui.Scroll,e.bcScrollTo=e.bcScroll.to}).call(this);