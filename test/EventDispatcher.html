<!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">
<title>baser.EventDispatcher</title>
<link rel="stylesheet" href="../node_modules/qunitjs/qunit/qunit.css">

</head>
<body>

<div id="qunit"></div>
<div id="qunit-fixture"></div>

<!-- Libraries -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>

<!-- Core Module -->
<script src="../dist/baser.js"></script>

<!-- Qunit -->
<script src="../node_modules/qunitjs/qunit/qunit.js"></script>

<!-- Test Code -->
<script>
"use strict";

QUnit.test('baser.EventDispatcher.on/trigger のテスト', function (assert) {
	assert.expect(2);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
	});
	eDispatcher.on('xEvent', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで 2つ 登録され、 trigger メソッドで発火した');
	});

	eDispatcher.trigger('xEvent');

});

QUnit.test('baser.EventDispatcher.on/off のテスト', function (assert) {
	assert.expect(0);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
	});
	eDispatcher.on('xEvent', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで 2つ 登録され、 trigger メソッドで発火した');
	});

	eDispatcher.off('xEvent');

	eDispatcher.trigger('xEvent');

});

QUnit.test('baser.EventDispatcher.on/off のテスト return false キャンセル', function (assert) {
	assert.expect(1);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
		return false;
	});
	eDispatcher.on('xEvent', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで 2つ 登録され、 trigger メソッドで発火した');
	});

	eDispatcher.trigger('xEvent');

});

QUnit.test('baser.EventDispatcher.on/off のテスト return false キャンセル2', function (assert) {
	assert.expect(2);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
	});
	eDispatcher.on('xEvent', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで 2つ 登録され、 trigger メソッドで発火した');
		return false;
	});

	eDispatcher.trigger('xEvent');

});

QUnit.test('baser.EventDispatcher.on/off のテスト stopImmediatePropagation キャンセル', function (assert) {
	assert.expect(1);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent', function(e) {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
		e.stopImmediatePropagation();
	});
	eDispatcher.on('xEvent', function(e) {
		assert.ok(true, 'カスタムイベントが on メソッドで 2つ 登録され、 trigger メソッドで発火した');
	});

	eDispatcher.trigger('xEvent');

});

QUnit.test('baser.EventDispatcher.on/off のテスト stopImmediatePropagation キャンセル2', function (assert) {
	assert.expect(2);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent', function(e) {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
	});
	eDispatcher.on('xEvent', function(e) {
		assert.ok(true, 'カスタムイベントが on メソッドで 2つ 登録され、 trigger メソッドで発火した');
		e.stopImmediatePropagation();
	});

	eDispatcher.trigger('xEvent');

});

QUnit.test('baser.EventDispatcher.on/off のテスト preventDefault キャンセル', function (assert) {
	assert.expect(2);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent', function(e) {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
		e.preventDefault();
	});
	eDispatcher.on('xEvent', function(e) {
		assert.ok(true, 'カスタムイベントが on メソッドで 2つ 登録され、 trigger メソッドで発火した');
	});

	eDispatcher.trigger('xEvent');

});

QUnit.test('baser.EventDispatcher.on/off のテスト preventDefault キャンセル2', function (assert) {
	assert.expect(1);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent', function(e) {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
		e.preventDefault();
	});
	eDispatcher.on('xEvent', function(e) {
		if (!e.isDefaultPrevented()) {
			assert.ok(true, 'カスタムイベントが on メソッドで 2つ 登録され、 trigger メソッドで発火した');
		}
	});

	eDispatcher.trigger('xEvent');

});

QUnit.test('baser.EventDispatcher.on 複数イベント のテスト', function (assert) {
	assert.expect(1);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent xEvent2', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
	});

	eDispatcher.trigger('xEvent');

});

QUnit.test('baser.EventDispatcher.on 複数イベント のテスト2', function (assert) {
	assert.expect(2);

	var eDispatcher = new baser.EventDispatcher();

	eDispatcher.on('xEvent xEvent2', function() {
		assert.ok(true, 'カスタムイベントが on メソッドで登録され、 trigger メソッドで発火した');
	});

	eDispatcher.trigger('xEvent');
	eDispatcher.trigger('xEvent2');

});

</script>

</body>
</html>